(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},52683,e=>{"use strict";e.s(["default",()=>i]);var t=e.i(43476),s=e.i(71645),l=e.i(18566);async function n(e){let t=e.type,s=e.name.toLowerCase();if("application/pdf"===t||s.endsWith(".pdf"))throw Error("PDF files are not supported in the static version. Please convert your PDF to a text file (.txt) and upload that instead. You can copy and paste the content from your PDF into a .txt file.");if("text/plain"===t||s.endsWith(".txt"))return await e.text();if(s.endsWith(".doc")||s.endsWith(".docx"))return await e.text();throw Error("Unsupported file type. Please use TXT files for best results, or DOC/DOCX files.")}function i(){let[e,i]=(0,s.useState)([]),[r,o]=(0,s.useState)(!1),[a,c]=(0,s.useState)(null),d=(0,l.useRouter)(),u=async e=>{e.preventDefault(),o(!0),c(null),i([]);let t=e.currentTarget.file;if(!t.files||0===t.files.length){c("Please select a file."),o(!1);return}let s=t.files[0];try{console.log("Extracting text from file:",s.name);let e=await n(s);console.log("Parsing MCQ content...");let t=function(e){let t=e.replace(/\u0000/g,"").replace(/\u001a/g,"").replace(/\u0003/g,"").replace(/[\u0000-\u001F\u007F-\u009F]/g," ").trim();console.log("Original text length:",e.length),console.log("Cleaned text preview:",t.substring(0,500)+"...");let s=t.split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0);1===s.length&&(console.log("Content is on single line, splitting intelligently..."),console.log("After smart splitting, lines:",(s=s[0].replace(/(\d+\.\s+)/g,"\n$1").replace(/([A-D]\)\s+)/g,"\n$1").replace(/(ANSWER\s+KEY)/gi,"\n$1").replace(/(REASONING)/gi,"\n$1").replace(/(GENERAL\s+KNOWLEDGE)/gi,"\n$1").replace(/(QUANTITATIVE\s+APTITUDE)/gi,"\n$1").replace(/(LOGICAL\s+REASONING)/gi,"\n$1").split("\n").map(e=>e.trim()).filter(e=>e.length>0)).length));let l=[],n={},i={},r=!1,o=[];for(let e=0;e<s.length;e++){let t=s[e].trim();if(!t)continue;if(/answer\s*key/i.test(t)){r=!0,i.question&&o.length>=4&&l.push({question:i.question,options:o.slice(0,4),questionNumber:i.questionNumber||l.length+1}),i={},o=[];continue}if(r){let e=t.match(/(?:Q?\s*)?(\d+)[\s\.\:\-]*([A-D])/i);if(e){let t=parseInt(e[1]),s=e[2].toUpperCase();n[t]||(n[t]=s)}continue}let a=t.match(/^(\d+)\.\s*(.+)/);if(a){i.question&&o.length>=4&&l.push({question:i.question,options:o.slice(0,4),questionNumber:i.questionNumber||l.length+1}),i={questionNumber:parseInt(a[1]),question:a[2].trim()},o=[];continue}let c=t.match(/^([A-D])\)\s*(.+)/i);if(c&&i.question){o.push(c[2].trim());continue}i.question&&!c&&0===o.length&&(i.question+=" "+t)}i.question&&o.length>=4&&l.push({question:i.question,options:o.slice(0,4),questionNumber:i.questionNumber||l.length+1});let a=l.filter(e=>4===e.options.length).slice(0,30),c=a.map((e,t)=>({...e,questionNumber:t+1})),d={};return a.forEach((e,t)=>{let s=e.questionNumber;n[s]&&(d[t+1]=n[s])}),console.log("Parsed questions:",c.length),console.log("Parsed answer key entries:",Object.keys(d).length),{questions:c,answerKey:d}}(e);if(0===t.questions.length)throw Error('No MCQ questions found. Please ensure your file contains questions ending with "?" followed by options A), B), C), D) and an answer key section.');i(t.questions);let l={questions:t.questions,answerKey:t.answerKey,totalQuestions:t.questions.length};console.log("Storing quiz data in localStorage:",l),localStorage.setItem("quizData",JSON.stringify(l)),console.log("Quiz data stored, redirecting to quiz page"),d.push("/quiz")}catch(e){console.error("Upload error:",e),c(e instanceof Error?e.message:"Failed to process the file. Please check the file format and try again.")}o(!1)};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-900 flex flex-col items-center justify-center p-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8 text-white",children:"MCQ Quiz Application"}),(0,t.jsxs)("div",{className:"bg-white border-2 border-gray-300 p-6 rounded-lg mb-8 max-w-2xl shadow-lg",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 mb-3 text-lg",children:"File Format Requirements:"}),(0,t.jsxs)("ul",{className:"text-gray-800 space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 font-bold mr-2",children:"•"}),"Supports: TXT files (recommended), DOC, DOCX files"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-red-600 font-bold mr-2",children:"•"}),"PDF files: Please convert to TXT format first"]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 font-bold mr-2",children:"•"}),'Questions should end with "?"']}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 font-bold mr-2",children:"•"}),"Options should be formatted as A) Option 1, B) Option 2, etc."]}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 font-bold mr-2",children:"•"}),'Include an "Answer Key" section at the end']}),(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"text-blue-600 font-bold mr-2",children:"•"}),'Answer key format: "1. A" or "Q1: B" etc.']})]})]}),(0,t.jsxs)("form",{onSubmit:u,className:"mb-8 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,t.jsx)("input",{type:"file",name:"file",accept:".txt,.doc,.docx",className:"border-2 border-gray-400 bg-white p-3 rounded-lg text-gray-900 font-medium file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"Supported formats: TXT (recommended), DOC, DOCX"})]}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50",disabled:r,children:r?"Processing File...":"Upload File"})]}),a&&(0,t.jsx)("div",{className:"bg-red-100 border-2 border-red-400 text-red-800 p-4 rounded-lg mb-4 max-w-2xl text-center font-medium",children:a}),e.length>0&&(0,t.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-6 text-white text-center",children:"Extracted MCQ Questions"}),(0,t.jsxs)("div",{className:"space-y-6",children:[e.slice(0,3).map((e,s)=>(0,t.jsxs)("div",{className:"bg-white border-2 border-gray-300 p-6 rounded-lg shadow-lg",children:[(0,t.jsxs)("p",{className:"font-bold text-gray-900 mb-4 text-lg",children:[e.questionNumber,". ",e.question]}),(0,t.jsx)("div",{className:"space-y-2",children:e.options.map((e,s)=>(0,t.jsxs)("p",{className:"text-gray-800 font-medium",children:[(0,t.jsxs)("span",{className:"font-bold text-blue-600",children:[String.fromCharCode(65+s),")"]})," ",e]},s))})]},s)),e.length>3&&(0,t.jsxs)("p",{className:"text-center text-gray-300 font-medium text-lg",children:["... and ",e.length-3," more questions"]})]})]})]})}}]);