(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},93232,e=>{"use strict";e.s(["default",()=>a]);var t=e.i(43476),s=e.i(71645),r=e.i(18566);function l(){let e=(0,r.useSearchParams)(),[l,a]=(0,s.useState)(null),[o,i]=(0,s.useState)({}),[d,c]=(0,s.useState)(0),[m,u]=(0,s.useState)(!1),[x,g]=(0,s.useState)(!1),[h,b]=(0,s.useState)(0),[p,N]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),[f,y]=(0,s.useState)([]),[w,q]=(0,s.useState)(null),[S,C]=(0,s.useState)(30),[A,k]=(0,s.useState)(!1),[z,Q]=(0,s.useState)(new Set),[R,D]=(0,s.useState)(new Set),[T,M]=(0,s.useState)(!1);(0,s.useEffect)(()=>{console.log("Quiz page loading, checking localStorage...");let t=localStorage.getItem("quizData");if(console.log("Stored data from localStorage:",t),t)try{console.log("Loading quiz data from localStorage");let e=JSON.parse(t);console.log("Parsed data:",e),a(e),b(0);let s=2*e.questions.length;C(s),c(60*s),localStorage.removeItem("quizData"),console.log("Quiz data loaded successfully and localStorage cleared");return}catch(e){console.error("Error parsing stored quiz data:",e)}let s=e.get("data");if(s)try{console.log("Raw data param:",s);let e=decodeURIComponent(s);console.log("Decoded data:",e);let t=e.replace(/\\u0000/g,"").replace(/\u0000/g,"");console.log("Cleaned data:",t);let r=JSON.parse(t);console.log("Parsed data:",r),a(r);let l=2*r.questions.length;C(l),c(60*l)}catch(e){console.error("Error parsing quiz data:",e),console.error("Failed data param:",s)}},[e]),(0,s.useEffect)(()=>{let e;return A&&m&&!x&&d>0&&(e=setInterval(()=>{c(e=>e<=1?(u(!1),P(),0):e-1)},1e3)),()=>clearInterval(e)},[A,m,x,d]);let P=()=>{u(!1),v(!0);let{results:e,scoreData:t}=(()=>{if(!l)return{results:[],scoreData:{totalQuestions:0,attempted:0,correct:0,incorrect:0,unattempted:0,score:0,maxScore:0}};console.log("Calculating results..."),console.log("Total questions in quizData:",l.questions.length),console.log("Answers object:",o),console.log("Answer key:",l.answerKey);let e=l.questions.map(e=>{let t=o[e.questionNumber]||null,s=l.answerKey[e.questionNumber]||"",r=z.has(e.questionNumber),n=null!==t,a=n&&t===s;return console.log("Q".concat(e.questionNumber,": attempted=").concat(n,", userAnswer=").concat(t,", correctAnswer=").concat(s)),{questionNumber:e.questionNumber,question:e.question,options:e.options,userAnswer:t,correctAnswer:s,isCorrect:a,isAttempted:n,isMarkedForReview:r}}),t=e.filter(e=>e.isAttempted).length,s=e.filter(e=>e.isCorrect).length,r=e.filter(e=>e.isAttempted&&!e.isCorrect).length,n=e.filter(e=>!e.isAttempted).length;console.log("Results summary:"),console.log("Total questions:",l.questions.length),console.log("Attempted:",t),console.log("Correct:",s),console.log("Incorrect:",r),console.log("Unattempted:",n);let a=2*l.questions.length;return{results:e,scoreData:{totalQuestions:l.questions.length,attempted:t,correct:s,incorrect:r,unattempted:n,score:2*s+-.5*r,maxScore:a}}})();y(e),q(t)};if(!l)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"No Quiz Data Found"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Please upload a PDF first."}),(0,t.jsx)("a",{href:"/",className:"text-blue-600 hover:underline",children:"Go back to upload"})]})});if(j&&f.length>0&&w){let e=Math.round(w.score/w.maxScore*100);return(0,t.jsx)("div",{className:"min-h-screen p-8 bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Quiz Results"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Here's how you performed"})]}),T?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Detailed Analysis"}),(0,t.jsx)("button",{onClick:()=>M(!1),className:"bg-gray-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"Back to Summary"})]}),(0,t.jsx)("div",{className:"space-y-6",children:f.map((e,s)=>(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 ".concat(e.isAttempted?e.isCorrect?"border-green-500":"border-red-500":"border-gray-400"),children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Q",e.questionNumber,". ",e.question]}),(0,t.jsxs)("div",{className:"px-3 py-1 rounded text-sm font-medium ".concat(e.isAttempted?e.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800":"bg-gray-100 text-gray-700"),children:[e.isAttempted?e.isCorrect?"+2 marks":"-0.5 marks":"Not Attempted",e.isMarkedForReview&&" (Reviewed)"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Options:"}),(0,t.jsx)("div",{className:"space-y-2",children:e.options.map((s,r)=>{let l=String.fromCharCode(65+r),n=e.userAnswer===l,a=e.correctAnswer===l;return(0,t.jsxs)("div",{className:"p-3 rounded text-sm border ".concat(a?"bg-green-50 border-green-300 text-green-900":n&&!a?"bg-red-50 border-red-300 text-red-900":"bg-gray-50 border-gray-200 text-gray-800"),children:[(0,t.jsxs)("span",{className:"font-semibold",children:[l,")"]})," ",s,a&&(0,t.jsx)("span",{className:"ml-2 text-green-700 font-semibold",children:"âœ“ Correct"}),n&&!a&&(0,t.jsx)("span",{className:"ml-2 text-red-700 font-semibold",children:"âœ— Your Answer"})]},r)})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:"Your Answer: "}),(0,t.jsx)("span",{className:"font-medium ".concat(e.isAttempted?e.isCorrect?"text-green-700":"text-red-700":"text-gray-600"),children:e.userAnswer||"Not Attempted"})]}),(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:"Correct Answer: "}),(0,t.jsx)("span",{className:"font-medium text-green-700",children:e.correctAnswer})]}),e.isMarkedForReview&&(0,t.jsx)("div",{className:"p-3 bg-purple-50 rounded",children:(0,t.jsx)("span",{className:"font-semibold text-purple-700",children:"ðŸ”– Marked for Review"})})]})]})]},s))}),(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsx)("a",{href:"/",className:"bg-blue-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Take Another Quiz"})})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsxs)("div",{className:"text-6xl font-bold text-blue-600 mb-2",children:[e,"%"]}),(0,t.jsxs)("div",{className:"text-xl text-gray-700",children:["Your Score: ",w.score," / ",w.maxScore]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:w.totalQuestions}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Total Questions"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-green-600",children:w.attempted}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Attempted"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-emerald-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-emerald-600",children:w.correct}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Correct"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-red-600",children:w.incorrect}),(0,t.jsx)("div",{className:"text-sm font-medium text-gray-700",children:"Wrong"})]})]}),(0,t.jsx)("div",{className:"text-center mb-8",children:(0,t.jsx)("div",{className:"inline-block px-6 py-3 rounded-lg text-lg font-semibold ".concat(e>=80?"bg-green-100 text-green-800":e>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e>=80?"ðŸŽ‰ Excellent Performance!":e>=60?"ðŸ‘ Good Job!":"ðŸ’ª Keep Practicing!"})}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>M(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"View Detailed Results"}),(0,t.jsx)("a",{href:"/",className:"bg-gray-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-gray-700 transition-colors",children:"Take Another Quiz"})]})]})]})})}let I=new Set(Object.keys(o).map(Number)),O=I.size,E=z.size,F=R.size,K=l.questions.length-F;return(0,t.jsx)("div",{className:"min-h-screen p-8 bg-gray-50",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:A?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"MCQ Quiz"}),(0,t.jsxs)("div",{className:"text-right space-y-2",children:[(0,t.jsx)("div",{className:"text-2xl font-bold ".concat(d<60?"text-red-600":d<300?"text-yellow-600":"text-green-600"),children:(e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(d)}),(0,t.jsxs)("div",{className:"text-sm text-gray-800 font-medium",children:[(0,t.jsxs)("span",{className:"text-green-600",children:["Answered: ",O]})," |",(0,t.jsxs)("span",{className:"text-purple-600",children:[" Review: ",E]})," |",(0,t.jsxs)("span",{className:"text-blue-600",children:[" Visited: ",F]})," |",(0,t.jsxs)("span",{className:"text-gray-600",children:[" Unvisited: ",K]})]})]})]}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 border",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("div",{className:"flex gap-2 flex-wrap justify-center",children:l.questions.map((e,s)=>{let r=s+1,n=I.has(r),a=z.has(r),o=R.has(r),i=h===s,d="w-10 h-10 text-sm rounded font-semibold transition-colors ",c="Question ".concat(r);return a?(d+="bg-purple-500 text-white hover:bg-purple-600",c+=" (Marked for Review)"):n?(d+="bg-green-500 text-white hover:bg-green-600",c+=" (Answered)"):o&&!n?(d+="bg-red-500 text-white hover:bg-red-600",c+=" (Visited but not answered)"):i?(d+="bg-blue-500 text-white",c+=" (Current)"):(d+="bg-gray-300 text-gray-800 hover:bg-gray-400",c+=" (Not visited)"),(0,t.jsx)("button",{onClick:()=>(e=>{var t;b(e),N(!1);let s=null==l||null==(t=l.questions[e])?void 0:t.questionNumber;s&&D(e=>new Set([...e,s]))})(s),className:d,title:c,children:r},s)})})})}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(n,{question:l.questions[h],answer:o[l.questions[h].questionNumber],isAnswered:I.has(l.questions[h].questionNumber),onAnswerChange:(e,t)=>{A&&(i(s=>({...s,[e]:t})),D(t=>new Set([...t,e])))},disabled:!1})}),(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsxs)("div",{className:"flex justify-center gap-4 items-center",children:[h===l.questions.length-1?(0,t.jsx)("button",{onClick:P,className:"bg-red-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-red-700 transition-colors",children:"Submit Quiz"}):(0,t.jsx)("button",{onClick:()=>{let e=h+1;if(e<((null==l?void 0:l.questions.length)||0)){var t;b(e);let s=null==l||null==(t=l.questions[e])?void 0:t.questionNumber;s&&D(e=>new Set([...e,s]))}},className:"bg-blue-600 text-white px-8 py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors",children:"Save and Next"}),(0,t.jsx)("button",{onClick:()=>{var e;let t=null==l||null==(e=l.questions[h])?void 0:e.questionNumber;t&&o[t]&&Q(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})},disabled:!o[l.questions[h].questionNumber],className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(o[l.questions[h].questionNumber]?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:z.has(l.questions[h].questionNumber)?"Remove Review Mark":"Mark for Review"}),(0,t.jsx)("button",{onClick:()=>{var e;let t=null==l||null==(e=l.questions[h])?void 0:e.questionNumber;t&&(i(e=>{let s={...e};return delete s[t],s}),D(e=>{let s=new Set(e);return s.delete(t),s}),Q(e=>{let s=new Set(e);return s.delete(t),s}))},className:"bg-gray-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors",disabled:!o[l.questions[h].questionNumber],children:"Clear Answer"})]})})]}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-8 text-gray-800",children:"Quiz Setup"}),(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("div",{className:"text-lg text-gray-700 mb-2",children:"Total Questions:"}),(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:l.questions.length})]}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("label",{className:"block font-medium text-gray-700 mb-3",children:"Quiz Duration:"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("input",{type:"number",min:"5",max:"180",value:S,onChange:e=>{let t=Number(e.target.value);C(t),c(60*t)},className:"border-2 rounded-lg px-4 py-2 w-20 text-center text-lg font-semibold"}),(0,t.jsx)("span",{className:"text-lg text-gray-700 font-medium",children:"minutes"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-2 font-medium",children:["Recommended: ",2*l.questions.length," minutes"]})]}),(0,t.jsx)("button",{onClick:()=>{k(!0),u(!0),g(!1)},className:"bg-green-600 text-white px-8 py-4 rounded-lg text-xl font-semibold hover:bg-green-700 transition-colors w-full",children:"Start Quiz"})]})]})})})}function n(e){let{question:s,answer:r,isAnswered:l,onAnswerChange:n,disabled:a}=e;return(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 ".concat(l?"border-green-500":"border-gray-300"," ").concat(a?"opacity-60":""),children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ".concat(l?"bg-green-500 text-white":"bg-gray-300 text-gray-800"),children:l?"âœ“":s.questionNumber}),(0,t.jsxs)("h3",{className:"text-lg font-semibold flex-1 text-gray-900",children:[s.questionNumber,". ",s.question]})]}),(0,t.jsx)("div",{className:"ml-9 space-y-3",children:s.options.map((e,l)=>{let o=String.fromCharCode(65+l);return(0,t.jsxs)("label",{className:"flex items-start gap-3 p-3 rounded-lg border transition-colors ".concat(r===o?"bg-blue-50 border-blue-300":"bg-gray-50 border-gray-200 hover:bg-gray-100"," ").concat(a?"cursor-not-allowed":"cursor-pointer"),children:[(0,t.jsx)("input",{type:"radio",name:"question-".concat(s.questionNumber),value:o,checked:r===o,onChange:e=>n(s.questionNumber,e.target.value),disabled:a,className:"mt-1"}),(0,t.jsxs)("span",{className:"flex-1 text-gray-800",children:[(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[o,")"]})," ",e]})]},l)})})]})}function a(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading quiz..."})]})}),children:(0,t.jsx)(l,{})})}}]);